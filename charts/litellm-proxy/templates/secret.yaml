{{- if .Values.masterKey.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "litellm-proxy.fullname" . }}-master-key
  labels:
    {{- include "litellm-proxy.labels" . | nindent 4 }}
  annotations:
    # Prevent Helm from regenerating the secret on upgrade
    "helm.sh/resource-policy": keep
type: Opaque
stringData:
  master-key: {{ include "litellm-proxy.generateMasterKey" . | quote }}
---
{{- end }}
{{- if .Values.saltKey.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "litellm-proxy.fullname" . }}-salt-key
  labels:
    {{- include "litellm-proxy.labels" . | nindent 4 }}
  annotations:
    # Prevent Helm from regenerating the secret on upgrade (salt key MUST NOT change!)
    "helm.sh/resource-policy": keep
type: Opaque
stringData:
  salt-key: {{ include "litellm-proxy.generateSaltKey" . | quote }}
{{- end }}
