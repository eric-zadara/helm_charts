# CI test values for litellm-proxy chart
# Minimal overlay on production defaults -- only override what differs for CI.
# Prerequisites: cnpg-operator (for internal PostgreSQL)
#
# Production defaults provide zero-config deployment with internal CNPG and Valkey.
# CI only needs to reduce replica counts, storage, and resources.

# Single replica for CI
replicaCount: 1

# Reduce internal database resources for CI
database:
  internal:
    instances: 1
    storageSize: "1Gi"
    pooler:
      instances: 1

# Reduce internal cache resources for CI
cache:
  internal:
    resources:
      requests:
        memory: 64Mi
        cpu: 50m
      limits:
        memory: 128Mi
        cpu: 250m

# HTTPRoute requires Gateway API CRDs (not in cnpg-operator prereq)
# Tested via inference-infrastructure which includes networking-layer.
httpRoute:
  enabled: false

# Not needed for single-replica CI
autoscaling:
  enabled: false
podDisruptionBudget:
  enabled: false

# Health checks - adjusted for startup time with migration
healthCheck:
  separateApp: false
  startup:
    initialDelaySeconds: 60
    failureThreshold: 60
