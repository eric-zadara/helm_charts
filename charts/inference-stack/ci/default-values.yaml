# CI test values for inference-stack
# Tests EPP with mock model server for full deployment validation.
# Requires: Gateway API Inference Extension CRDs (from inference-operators)

infrastructureReleaseName: "infra"
infrastructureNamespace: ""

model-serving:
  enabled: true

  # ClusterServingRuntimes require KServe CRDs - disable for CI
  servingRuntime:
    enabled: false
  llamacppRuntime:
    enabled: false
  ollamaRuntime:
    enabled: false

  # InferenceService requires KServe CRDs - disable for CI
  inferenceService:
    enabled: false
  llamacppInferenceService:
    enabled: false
  ollamaInferenceService:
    enabled: false

  # InferencePool requires Inference Extension CRDs - disable for CI
  # (inference-gateway creates its own testPool for EPP)
  inferencePool:
    enabled: false

  priorityClasses:
    enabled: false

  serviceMonitor:
    enabled: false

inference-gateway:
  enabled: true

  # EPP runs with mock backend
  epp:
    replicas: 1
    poolName: "ci-test-pool"
    poolNamespace: "default"

  # Create test InferencePool pointing to mock model server
  testPool:
    enabled: true
    targetPort: 8000
    selector:
      app: test-model-server
    failureMode: "FailOpen"

  # Enable CI mock model server (satisfies EPP endpoint requirement)
  ci:
    modelServer:
      enabled: true

  # Disable internal Gateway (requires Gateway API CRDs from envoy-gateway)
  gateway:
    enabled: false

  # Disable EnvoyExtensionPolicy (requires Envoy Gateway CRDs)
  extensionPolicy:
    enabled: false

  rbac:
    create: true

  serviceMonitor:
    enabled: false

  dashboards:
    enabled: false
