# Umbrella chart for LLM inference platform operators and CRDs
# Includes CNPG operator, KServe controller, and Knative Serving core

# CloudNativePG operator - installs operator controller + CRDs
# Required for deploying PostgreSQL clusters via inference-infrastructure
cloudnative-pg:
  # -- Enable CNPG operator deployment
  enabled: true
  # Note: Operator installs to release namespace by default
  # CRDs are installed automatically with the operator

# KServe controller - reconciles InferenceService, ClusterServingRuntime resources
# Required for model serving resources to function beyond just CRD acceptance
kserve:
  # -- Enable KServe controller deployment
  enabled: true
  kserve:
    controller:
      # Use Knative deployment mode (v0.16.0 renamed "Serverless" to "Knative")
      deploymentMode: "Knative"
      resources:
        limits:
          cpu: 100m
          memory: 300Mi
        requests:
          cpu: 100m
          memory: 300Mi
    # Disable ALL built-in ClusterServingRuntimes
    # This project provides its own runtimes via model-serving chart (vLLM, llama.cpp, Ollama)
    servingruntime:
      tensorflow:
        disabled: true
      mlserver:
        disabled: true
      sklearnserver:
        disabled: true
      xgbserver:
        disabled: true
      huggingfaceserver:
        disabled: true
      tritonserver:
        disabled: true
      pmmlserver:
        disabled: true
      paddleserver:
        disabled: true
      lgbserver:
        disabled: true
      torchserve:
        disabled: true
    # Disable features not needed for this project
    localmodel:
      enabled: false

# Knative Serving core - deploys activator, autoscaler, controller, webhook
# Required for Knative ConfigMaps (config-autoscaler, config-features) to have consumers
knative-serving:
  # -- Enable Knative Serving core deployment
  enabled: true

# Gateway API CRDs (HTTPRoute, Gateway, GatewayClass)
gateway-api:
  # -- Enable Gateway API CRD installation
  enabled: true

# Knative Serving CRDs (Service, Configuration, Revision, Route)
knative-serving-crds:
  # -- Enable Knative Serving CRD installation
  enabled: true

# KServe CRDs (InferenceService, ServingRuntime, ClusterServingRuntime)
kserve-crds:
  # -- Enable KServe CRD installation
  enabled: true

# Inference Extension CRDs (InferencePool, InferenceModel)
inference-extension-crds:
  # -- Enable Inference Extension CRD installation
  enabled: true
